<!DOCTYPE html>
<html>
<head>
  <title>Multiple Choice Quiz</title>
  <style>
    .question {
      margin-bottom: 30px;
      /* Increased margin-bottom for spacing */
      padding: 20px;
      /* Add padding for better visual separation */
      background-color: #f5f5f5;
      /* Add a background color for better visual separation */
      border-radius: 5px;
      /* Add border-radius for a softer look */
    }
    .question-image {
      max-width: 100%;
      height: auto;
      margin-bottom: 10px;
    }
    .options {
      list-style-type: none;
      padding: 0;
    }
    .options li {
      margin-bottom: 5px;
      cursor: pointer;
      padding: 5px 10px;
      border: 1px solid #c9daf8;
      border-bottom: 2px solid #a1b8e2;
      border-radius: 4px;
    }
    .correct {
      border-color: green;
      background: linear-gradient(to bottom, #d9ffdd, #84e184);
    }
    .incorrect {
      border-color: red;
      background: linear-gradient(to bottom, #ffd9d9, #e18484);
    }
  </style>
</head>
<body>
  <h1>Multiple Choice Quiz</h1>
  <div id="quiz"></div>
  <script>
    // Function to shuffle an array
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // Function to fetch the JSON data from the external file
    function fetchData() {
      return fetch('mcq.txt')
        .then(response => response.text())
        .then(data => JSON.parse(data));
    }

    // Function to display the quiz questions
    function displayQuiz(questions) {
      const quizContainer = document.getElementById('quiz');
      questions.forEach((question, index) => {
        const questionDiv = document.createElement('div');
        questionDiv.classList.add('question');
        const questionText = document.createElement('h3');
        questionText.textContent = `${index + 1}. ${question.question}`;
        questionDiv.appendChild(questionText);

        // Display the question image if provided
        if (question.image) {
          const questionImage = document.createElement('img');
          questionImage.src = question.image;
          questionImage.classList.add('question-image');
          questionDiv.appendChild(questionImage);
        }

        const optionsList = document.createElement('ol');
        optionsList.classList.add('options');

        // Shuffle the options array
        const shuffledOptions = shuffleArray([...question.options]);

        // Create a map to store the correct answer indices after shuffling
        const answerMap = new Map();

        shuffledOptions.forEach((option, optionIndex) => {
          const optionItem = document.createElement('li');
          optionItem.textContent = option;
          optionItem.dataset.index = optionIndex; // Store the index as a data attribute

          // Update the answerMap with the correct answer index
          if (question.answer.includes(question.options.indexOf(option))) {
            answerMap.set(optionIndex, true);
          }

          optionItem.addEventListener('click', () => showAnswer(optionItem, answerMap));
          optionsList.appendChild(optionItem);
        });
        questionDiv.appendChild(optionsList);
        quizContainer.appendChild(questionDiv);
      });
    }

    // Function to show the correct answer
    function showAnswer(optionItem, answerMap) {
      const optionIndex = parseInt(optionItem.dataset.index);
      const isCorrect = answerMap.get(optionIndex) || false;
      // Remove existing classes
      optionItem.classList.remove('correct', 'incorrect');
      // Add the appropriate class based on correctness
      optionItem.classList.add(isCorrect ? 'correct' : 'incorrect');
    }

    // Fetch the JSON data and display the quiz
    fetchData()
      .then(data => displayQuiz(data))
      .catch(error => console.error('Error fetching data:', error));
  </script>
</body>
</html>
